---
layout: mypost
title: 计算机体系结构
categories: [计算机网络 体系结构]
---

## 计算机网络概念

计算机网络是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。

计算机网络是互连的、自治的计算机集合。

## 功能

1. <span style="color:#ba4a00;font-weight:bold;">数据通信</span>(连通性)
2. <span style="color:#ba4a00;">资源共享</span>（硬件、软件、数据）

3. 分布式处理：多台计算机各自承担同一工作任务的不同部分（Hadoop 平台）

4. 提高可靠性（替代机）

---

## 组成

1. 组成部分
   硬件、软件、协议
2. <span style="color:#2874a6;font-weight:bold;">工作方式</span>
   - 边缘部分：用户直接使用
     - C/S 方式
     - P2P 方式
   - 核心部分：为边缘部分服务
3. <span style="color:#2874a6;font-weight:bold;">功能组成：</span>

   - 通信子网：实现**数据通信**（各种传输介质、通信设备、相应的网络协议组成）

     网络层（路由器）、数据链路层（交换机、网桥）、物理层（集线器、中继器）

   - 资源子网：实现**资源共享**/数据处理（实现资源共享功能的设备和软件的集合）

     应用层、表示层、会话层

---

## 分类

1.<span style="color:#2874a6;font-weight:bold;">分布范围</span>分`广域网WAN`(交换技术)、`城域网MAN`、`局域网WAN`(广播技术)、`个人局域网PAN`

2. 使用者
   - 公用网 电信等
   - 专用网 军队、政府、公安、银行等
3. <span style="color:#2874a6;font-weight:bold;">交换技术</span>
   - 电路交换
   - 报文交换
   - 分组交换
4. <span style="color:#2874a6;font-weight:bold;">拓扑结构</span>
   - 星型网络
   - 总线型
   - 环形
   - 网状形
5. <span style="color:#2874a6;font-weight:bold;">传输技术</span>
   - <span style="color:#239b56;font-weight:bold;">点对点网络</span>(共享公共通信信道)
   - <span style="color:#ba4a00;font-weight:bold;">广播式网络</span>(使用 **分组转发** 和 **路由选择** 机制)

---

## 标准化

标准化对计算机网络至关重要！要实现不同厂商硬件、软件之间相互连通，必须遵从统一的标准。

标准的分类：

- 法定标准：有权威机构指定的正式的、合法的标准 OSI
- 事实标准：某些公司的产品在竞争中占据了主流，时间成了，这些产品中的协议和技术就成了标准 TCP/IP

RFC(Request For Comments)——因特网标准的形式

RFC 上升为因特网正式标准的**四个阶段：**

1. 因特网草案(Internet Draft)这个阶段还不是 RFC 文档。
2. 建议标准(Proposed Standard)从这个阶段开始成为 RFC 文档。
3. 草案标准(Draft Staandard)
4. 因特网标准(Internet Standard)

标准化工作的相关组织：

- **国际标准化组织 ISO** :OSI 参考模型、HDLC 协议
- 国际电信联盟 ITU :制定通信规则
- 国际电气电子工程师协会 IEEE : 学术机构、IEEE802 系例如标准、5G
- Internet 工程任务组 IETF :负责因特网相关标准的制定 RFC-XXXX

---

## 性能指标

1. <span style="color:#2874a6;font-weight:bold;">速率(Speed)：</span>

   速率即数据率或称数据传输率或比特率，比特 1/0 位，连接在计算机网络上的主机在数字信道上传送数据位数的速率。

   单位是 b/s,kb/s,Mv/s,Gb/s,Tb/s

速率一般是 10<sup>3</sup>倍，存储容量 1Byte(字节)=8bit(比特)，相差为 2<sup>10</sup>倍。

2. <span style="color:#2874a6;font-weight:bold;">带宽(Bandwidth)：</span>

   - (1).“带宽”的本质是信号具有的频带宽度，级最高频率与最低频率之差，单位是赫兹(HZ).
   - (2).计算机网络中，带宽用来表示网络的通信线路传送数据的能力，通常是指单位时间内从网络的某一点到另一点所能通过的“最高数据率”。单位是“比特每秒”，b/s,kb/s,Mb/s,Gb/s。
     简单理解即为网络设备所能支持的最高速度

3. <span style="color:#2874a6;font-weight:bold;">吞吐量(Throughput)：</span>

   - 表示在单位时间内通过某个网络(或信道、接口)的数据量。吞吐量受网络的带宽或网络的额定速率限制。

4. <span style="color:#2874a6;font-weight:bold;">时延(Delay)</span>

   指数据(报文/分组/比特流)从网络(或链路)的一端传送到另一端所需要的时间。也叫延迟或迟延。单位是 S。

- **发送时延(传输时延)**：从发送分组的第一个比特算起，到该分组的最后一个比特发送完毕所需要的时间。

  发送时延=数据长度/信道带宽(发送速率)

- **传播时延**：取决于电磁波传播速度和链路长度

  传播时延=信道长度/电磁波在信道上的传播速率

- **排队时延**：等待输出/入链路可用
- **处理时延**：检错、找出口

总时延= 发送时延+传播时延+排队时延+处理时延

5. <span style="color:#2874a6;font-weight:bold;">时延带宽积(Delay)</span>

   时延带宽积(bit) = 传播时延(s)\*带宽(b/s)

   时延带宽积又称为以<span style="color:#ba4a00;">比特为单位的链路长度</span>。即“某段链路现在有多少比特”(容量)。

6. <span style="color:#2874a6;font-weight:bold;">往返时延 RTT(Round-Trip Time)</span>

   从发送数据开始，到发送方收到接收方的确认(接收方收到数据后立即发送确认)，总共经历的时延。

   RTT 越大，在收到确认之前，可以发送的数据越多。

- **RTT 包括**：

  - 往返传播时延= 传播时延\*2
  - 末端处理时间

7. <span style="color:#2874a6;font-weight:bold;">利用率</span>

   - 信道利用率：有数据通过时间/(有+无)数据通过实践
   - 网络利用率：信道利用率加权平均值

   **<center>利用率越高,时延急剧增大，速率降低。</center>**

---

## 分层结构

网络体系结构是从功能上描述计算机网络的。
计算机网络体系结构简称网络体系结构是是分层结构。
每层遵循某个/些网络协议以完成本层功能。
计算机网络体系结构是计算机网络的各层及其协议的集合。
第 n 层在向 n+1 层提供服务时，此服务不仅包含第 n 层本身的功能，还包含有下层服务提供的功能。
仅仅在相邻层间有接口，且所提供的服务的具体实现细节上对上一层完全屏蔽。
体系结构是抽象的，而实现是指能运行的一些软件和硬件。

分层的基本原则：

1. 各层之间相互独立，每层只实现一种相对独立的功能。
2. 每层之间界面自然清晰，易于理解，相互交流尽可能少。
3. 结构上可分隔开。每层都采用最合适的技术来实现。
4. 保持下层对上层的独立性，**上层单向使用下层的服务**。
5. 整个分层结构能促进标准化工作。

![NetworkPDURealtion.png](NetworkPDURelation.png)

1. **实体**：第 n 层中的活动元素称为<span style="color:#ba4a00;">n 层实体</span>。同一层的实体叫<span style="color:#ba4a00;">对等实体</span>。
2. **协议**：为进行网络中的对等实体数据交换而建立的规则、标准或约定称为网络协议。【水平】
   - 语法：规定传输数据的格式
   - 语义：规定所要完成的功能
   - 同步：规定各种操作的顺序
3. **接口(访问服务点 SAP)**:上层使用下层的入口。
4. **服务**:下层为相邻上层提供的功能的功能调用。【垂直】

SDU 服务数据单元：为完成用户所要求的功能而应传送的数据。

PCI 协议控制信息：控制协议操作的信息。

PDU 协议数据单元：对等层次之间传送的数据单位。

PCI+SUD=PDU

![四类源语的关系]
![协议、接口、服务三者之间的关系]

- 计算机网络分层结构

  - 7 层 OSI 参考模型(法定标准)

    目的：支持异构网络的互联互通。
    ISO 于 1984 年提出 OSI 参考模型。

    ![OSI.png](OSI.png)

    - **应用层(Application Layer)**：用户与网络的界面。
      典型的应用层服务：文件传输 FTP、电子邮件 SMTP、万维网 HTTP
    - **表示层(Presentation Layer)**:用于处理在两个通信系统中交换信息的表示方式(语法和语义)

      - 数据格式变换
      - 数据加密解密
      - 数据压缩和恢复

    - **会话层(Session Layer)**：向表示层实体/用户进程提供建立连接并在连接上有恤地传输数据。这是绘画，也是建立同步(SYN)

      - 建立、管理、终止会话
      - 使用校验点可使会话在通信失效时从<span style="color:#239b56;">校验点/同步点</span>继续回复通信，实现数据同步。

    - **传输层(Transport Layer)**:负责主机中两个进程的通信，即<sapn style="color:#ba4a00;">端到端</sapn>的通信。传输单位是报文段或用户数据报。

      - 可靠传输、不可靠传输
      - 差错控制
      - 流量控制
      - 复用分用
        - 复用：多个应用层进程可同时使用下面运输层 的服务。
        - 分用：运输层把收到的消息分别交付给上面应用层中相应的进程。

      主要协议：TCP、UDP

    - **网络层(Network Layer)**：主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。网络层传输单位是数据报。

      - 路由选择(最佳路径)
      - 流量控制(控制速率)
      - 差错控制
      - 拥塞控制:若所有节点都来不及接受分组，而要丢弃大量分组的话，网络就处于拥塞状态。因此要采取一定措施，缓解这种拥塞。

      主要协议：IP、IPX、ICMP、IGMP、ARP、RARP、OSPF

    - **数据链路层(Datalink Layer)**:主要任务是把网络层传下来的数据报组装成帧。数据链路层/链路层的传输单位是帧。

      - 成帧(定义帧的开始和结束)
      - 差错控制(帧错+位错)
      - 流量控制
      - 访问(接入)控制：控制对信道的访问

      主要协议：SDLC、HDLC、PPP、STP

    - **物理层(Physical Layre)**:主要任务是在物理媒体上实现比特流的透明传输。物理层传输单位是比特。

      - 定义接口特性
      - 定义传输模式(单工、双工、单双杠)
      - 定义传输速率
      - 比特同步
      - 比特编码

      主要协议：Rj45、802.3

    <span style="color:#ba4a00;font-weight:bold;">透明传输</span>:指不管所传数据是什么样的比特组合，都应当能够在链路上传送。


    - 4层TCP/IP参考模型(事实标准)

    OSI参考模型与TCP/IP参考模型相同点：
      1. 都分层
      2. 基于独立的协议栈的概念
      3. 可以实现异构网络互联

    不同点：

      1. OSI定义三大殿：服务、协议、接口
      2. OSI先出现，参考模型先于协议发明，不偏向特定协议
      3. TCP/IP设计之初就考虑异构网互联问题，将IP作为重要层次
      4. 
      <table border="1">
      <tr>
      <th>&emsp;&emsp;</th>
      <th>ISO/OSI参考模型</th>
      <th>TCP/IP参考模型</th>
      </tr>
      <tr>
      <td>网络层</td>
      <td>无连接+面向连接</td>
      <td><center>无连接</center></td>
      </tr>
      <tr>
      <td>传输层</td>
      <td><center>面向连接</center></td>
      <td>无连接+面向连接</td>
      </tr>
      </table>

      - 5层体系结构：综合了OSI和TCP/IP的优点
          
          - 应用层支持各种网络应用  FTP、SMTP、HTTP
          - 传输层 进程-进程的数据传输  TCP、UDP
          - 网络层 源主机到目的主机的数据分组路由与转发  IP、ICMP、OSPF等
          - 数据链路层 把网络层传下来的数据包组装成帧  Ethernet、PPP
          - 物理层  比特传输
